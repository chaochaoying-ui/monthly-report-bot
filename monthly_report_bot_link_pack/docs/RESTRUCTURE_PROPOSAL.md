# 渐进式目录整理提案（草案）

> 目标：在不破坏现有运行与测试的前提下，逐步降低根目录噪声、统一产物输出位置、减少测试收集歧义。

## 原则
- 兼容优先：不移动现有代码入口，不更改现有启动脚本参数。
- 渐进迭代：先引入新目录与约定，再按需迁移产物与脚本命名。
- 可回滚：每一步都可通过删除新增约定或恢复命名实现回滚。

## 建议变更（分阶段）

### 第 1 阶段（仅新增目录与文档说明）
- 新增输出目录：
  - `logs/`：运行与诊断日志输出位置
  - `reports/`：测试与综合报表输出位置                                   
  - `data/`：运行时产生的 JSON/缓存等数据
- 在 `README.md` 增补“产物输出位置”说明，暂不改动任何代码与脚本。

### 第 2 阶段（非破坏性重命名与配置）
- 将 `scripts/` 下用于手工/集成触发的 Python 文件去除 `test_` 前缀，统一为 `run_*.py` 命名，避免被 `pytest` 收集为测试。
- 若存在 `pytest.ini` 或 `pyproject.toml`，可通过 `testpaths = tests` 限定收集目录（需与现有测试策略确认）。

### 第 3 阶段（产物输出位置收敛）
- 在日志/报表/数据写入处增加（或读取）`logs/`、`reports/`、`data/` 前缀：
  - 日志：`logs/*.log`
  - 报表：`reports/test_report_*.json`、`reports/comprehensive_test_results.json`
  - 数据：`data/created_tasks.json`、`data/task_stats.json`
- 提供兼容路径回退（若目录不存在则回退到原路径）。

## 风险与回滚
- 风险：
  - 命名调整导致脚本不可被现有自动化触发（需提前在文档标注别名或保留软链接/入口）。
  - 日志/产物路径调整可能影响外部依赖的收集脚本（通过双写或回退逻辑缓解）。
- 回滚：
  - 删除新增目录与说明文件，保留原始脚本命名与输出路径即可。

## 里程碑与验收
- 每个阶段完成后，需验证：
  - 现有启动脚本仍可成功启动对应服务
  - 现有测试集合通过（`pytest -q` 或既定命令）
  - README 已同步更新对应说明

（本文件为草案，后续根据实施反馈更新。）













